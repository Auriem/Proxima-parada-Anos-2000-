<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <title>Admin - Enviar E-mails</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      background: #1a0033;
      color: #fff;
      display: flex;
      justify-content: center;
      align-items: center;
      height: 100vh;
      margin: 0;
    }
    .login, .panel {
      background: #fff;
      color: #000;
      padding: 20px;
      border-radius: 10px;
      width: 100%;
      max-width: 500px;
      box-shadow: 0 0 12px #ff00ff;
    }
    h2 { text-align: center; }
    label { display: block; margin-top: 10px; }
    input, select, textarea, button {
      width: 100%;
      padding: 10px;
      margin-top: 5px;
      border-radius: 5px;
      border: 1px solid #ccc;
      font-size: 14px;
    }
    button {
      background: linear-gradient(45deg,#ff00ff,#8000ff);
      color: #fff;
      font-weight: bold;
      cursor: pointer;
      border: none;
      margin-top: 15px;
    }
    button:hover {
      opacity: 0.9;
    }
    .hidden { display: none; }
  </style>
</head>
<body>

  <!-- Tela de login -->
  <div class="login" id="login-box">
    <h2>üîí Acesso Restrito</h2>
    <label for="password">Senha:</label>
    <input type="password" id="password">
    <button onclick="checkPassword()">Entrar</button>
    <p id="login-error" style="color:red; display:none; font-size:13px; margin-top:8px;">Senha incorreta.</p>
  </div>

  <!-- Painel de envio -->
  <div class="panel hidden" id="admin-panel">
    <h2>üì© Enviar E-mail</h2>
    <label for="nome">Nome do Cliente</label>
    <input type="text" id="nome">

    <label for="email">E-mail do Cliente</label>
    <input type="email" id="email">

    <label for="telefone">Telefone</label>
    <input type="text" id="telefone">

    <label for="sessao">Sess√£o</label>
    <input type="text" id="sessao" placeholder="Ex.: 04/10/2025 - 20h30">

    <label for="ingressos">Ingressos</label>
    <input type="text" id="ingressos" placeholder="Ex.: 2 inteiras, 1 meia">

    <label for="valor">Valor (R$)</label>
    <select id="valor">
      <option value="25">25</option>
      <option value="50">50</option>
      <option value="75">75</option>
      <option value="100">100</option>
      <option value="125">125</option>
      <option value="150">150</option>
      <option value="175">175</option>
      <option value="200">200</option>
    </select>

    <label for="link_pagamento">Link de Pagamento</label>
    <input type="text" id="link_pagamento" placeholder="Cole o link correto do Mercado Pago">

    <label for="tipo_email">Tipo de E-mail</label>
    <select id="tipo_email">
      <option value="pendente">‚ö†Ô∏è Pagamento Pendente</option>
      <option value="lembrete">‚è≥ Lembrete de Pagamento</option>
    </select>

    <button onclick="enviarEmail()">Enviar E-mail</button>
    <p id="status" style="margin-top:10px; font-weight:bold;"></p>
  </div>

  <!-- EmailJS -->
  <script src="https://cdn.jsdelivr.net/npm/@emailjs/browser@4/dist/email.min.js"></script>
  <script>
    /***************
     CONFIGURA√á√ïES
    ***************/
    const ADMIN_PASSWORD = "2000admin"; // üîë senha de acesso (troque se quiser)
    const EMAILJS_SERVICE_ID = "service_c9ak8yp";
    const TEMPLATE_PENDENTE = "template_5lax0jv";  // ‚ö†Ô∏è Pagamento pendente
    const TEMPLATE_LEMBRETE = "template_w1t8lt8"; // ‚è≥ Lembrete
    const EMAILJS_PUBLIC_KEY = "zWI9wjgMNAHJ0WV7f";

    emailjs.init({ publicKey: EMAILJS_PUBLIC_KEY });

    /***************
     LOGIN
    ***************/
    function checkPassword() {
      const pass = document.getElementById("password").value;
      if(pass === ADMIN_PASSWORD) {
        document.getElementById("login-box").classList.add("hidden");
        document.getElementById("admin-panel").classList.remove("hidden");
      } else {
        document.getElementById("login-error").style.display = "block";
      }
    }

    /***************
     ENVIO DE EMAIL
    ***************/
    async function enviarEmail() {
      const nome = document.getElementById("nome").value.trim();
      const email = document.getElementById("email").value.trim();
      const telefone = document.getElementById("telefone").value.trim();
      const sessao = document.getElementById("sessao").value.trim();
      const ingressos = document.getElementById("ingressos").value.trim();
      const valor = document.getElementById("valor").value;
      const link_pagamento = document.getElementById("link_pagamento").value.trim();
      const tipo_email = document.getElementById("tipo_email").value;

      if(!nome || !email || !sessao || !ingressos || !link_pagamento) {
        document.getElementById("status").textContent = "‚ùå Preencha todos os campos obrigat√≥rios.";
        document.getElementById("status").style.color = "red";
        return;
      }

      const payload = {
        from_name: nome,
        from_email: email,
        phone: telefone || "‚Äî",
        sessao: sessao,
        ingressos: ingressos,
        valor: valor,
        link_pagamento: link_pagamento
      };

      const templateID = (tipo_email === "pendente") ? TEMPLATE_PENDENTE : TEMPLATE_LEMBRETE;

      try {
        await emailjs.send(EMAILJS_SERVICE_ID, templateID, payload);
        document.getElementById("status").textContent = "‚úÖ E-mail enviado com sucesso!";
        document.getElementById("status").style.color = "green";
      } catch (err) {
        document.getElementById("status").textContent = "‚ùå Erro: " + JSON.stringify(err);
        document.getElementById("status").style.color = "red";
      }
    }
  </script>
</body>
</html>
